# VKTestApp

## Тестовое задание

Необходимо написать приложение для отображения списка друзей VK.

Что должно быть:

- возможность авторизоваться с имеющимся аккаутом от VK
- возможность выйти из системы (log out)
- отображение списком информации о друге (фото, имя-фамилия)
- кешировать данные и отображать список когда нет подключения к интернету
- возможность очистить кэш 
- возможность обновить список
- поддержка sdk 15 и выше

приветствуется (но не требуется) работа с запросами к api, а не с sdk

## Реализация

### Экран авторизации

Экран реализует паттерн MVP.
Модель проверяет статус авторизации. Возвращает ответ в презентер.
Презентер решает отправлять на авторизацию, либо открыть экран со списком друзей и отправляет соответствующие команды во вью.
Если в презентер при авторизации приходит ошибка, он дает команду вью отобразить ее.
Вью может открыть фрагмент авторизации, экран списка друзей, а также показать тоаст.
LoginFragment отображает экран авторизации. Он имеет всего лишь одну кнопку для перехода во флоу авторизации VK SDK.
Экран авторизации не изменяет ориентацию, он закреплен вертикально.

### Экран списка друзей

Он имеет более сложную архитектуру. Он умеет сохранять текущее состояние при повороте экрана.
Достигается это благодаря хранению MVP-объектов в retain Fragment.
Внедрение зависимостей MVP осуществляется фреймворком Dagger2.
Компоненты и модули для экрана храняться в пакете dagger для конкретного экрана.
Внедрение зависимостей осуществляется при создании фрагмента в методе Fragment#onCreate.
В этом же методе мы вызываем setRetainInstance(true).
Данный вызов сообщает фрагменту, что он не должен пересоздаваться при пересоздании Activity к которому относится фрагмент.
Этот функционал вынесен в класс BaseRetainFragment

MVP экрана списка друзей:
Модель выполняет функции получения списка друзей, сохранения их в кэш с последующим получением из кэша и очистку кэша.
Презентер содержит логику взаимодействия модели и вью.
Вью отвечает за отображение экрана и отслеживание действий пользователя.

В пакете "extras" содеражаться базовые компоненты
- architecture - базовые классы архитектуры
- recycler - работа со списком
- view_holders - базовые вью холдеры

Пакет "utils" содержит класс SimpleDiskCache для работы с кэшем



## Технологический стек

### com.vk:androidsdk
VK SDK

### picasso
Библиотека для загрузки, отображения и кеширования фотографий

### PhotoView
Библиотека для отображения фотографий с возможностью зумирования

### recyclerview
Компонент для отображения списка со встроенным вьюхолдером

### disklrucache
Библиотека для кэширования на диске

### dagger2
DI framework

### butterknife
Биндинг вьюэлементов

### gson
Парсинг json в POJO

